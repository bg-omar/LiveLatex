<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>com.omariskandarani.livelatex</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/best-practices-for-listing.html#plugin-name -->
    <name>LiveLatex</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor url="https://www.omariskandarani.com">omariskandarani</vendor>


    <depends>com.intellij.modules.platform</depends>

    <!-- Tool Window -->
    <extensions defaultExtensionNs="com.intellij">
        <toolWindow id="LaTeX Preview"
                    anchor="right"
                    factoryClass="com.omariskandarani.livelatex.ui.LatexPreviewToolWindowFactory"
                    icon="/icons/livelatex.svg"/>
        <projectService serviceImplementation="com.omariskandarani.livelatex.core.LatexPreviewService"/>
    </extensions>

    <!-- Action to open/focus the preview window -->
    <actions>
        <action id="com.omariskandarani.LiveLatex.actions.ShowPreview"
                class="com.omariskandarani.livelatex.actions.ShowPreviewAction"
                text="Show LaTeX Preview"
                description="Open/focus LaTeX Preview tool window">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt P"/>
        </action>
        <action id="LiveLaTeX.GenerateTable"
                class="com.omariskandarani.livelatex.actions.GenerateLatexTableAction"
                text="Generate LaTeX Table…"
                description="Create a LaTeX table from CSV/Markdown or a blank template">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>
        <action id="LiveLaTeX.InsertImage"
                class="com.omariskandarani.livelatex.actions.InsertImageAction"
                text="Insert Image…"
                description="Copy image into project and insert \\includegraphics snippet">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </action>

        <action id="LiveLaTeX.NewTikzFigure"
                class="com.omariskandarani.livelatex.actions.NewTikzFigureAction"
                text="New TikZ Figure…"
                description="Open a simple canvas, export TikZ and insert it here">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
        
        <!-- Text formatting actions submenu -->
        <group id="LiveLaTeX.TextFormatGroup" text="Format Selection" popup="true">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <action id="LiveLaTeX.Text.Bold" class="com.omariskandarani.livelatex.actions.MakeTextBoldAction" text="bold = \\textbf{TEXT}"/>
            <action id="LiveLaTeX.Text.Italic" class="com.omariskandarani.livelatex.actions.MakeTextItalicAction" text="italic = \\textit{TEXT}"/>
            <action id="LiveLaTeX.Text.TexOrPdf" class="com.omariskandarani.livelatex.actions.WrapWithTexorpdfstringAction" text="text-pdf = \\texorpdfstring{TEXT}{TEXT}"/>
            <action id="LiveLaTeX.Text.Emph" class="com.omariskandarani.livelatex.actions.MakeTextEmphAction" text="emph = \\emph{TEXT}"/>
            <action id="LiveLaTeX.Text.Equation" class="com.omariskandarani.livelatex.actions.InsertEquationEnvironmentAction" text="equation environment"/>
            <action id="LiveLaTeX.Text.Cite" class="com.omariskandarani.livelatex.actions.MakeTextCiteAction" text="cite = \\cite{TEXT}"/>
        </group>
        
        <group id="LiveLaTeX.InsertReference"
               class="com.omariskandarani.livelatex.actions.InsertReferenceActionGroup"
               text="Insert Reference…"
               description="Insert a reference (\\ref or \\cite) from available labels and BibTeX entries"
               popup="true">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </group>
    </actions>
</idea-plugin>